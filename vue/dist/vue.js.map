{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction(val) { \r\n    return typeof val === 'function';\r\n}\r\n\r\nexport function isObject(val) {\r\n   return typeof val === 'object'&& val!==null;\r\n}","import { isObject } from \"../utils\";\r\n\r\n// 创建观测者\r\nclass Observer{\r\n    constructor(data){\r\n        //对对象中的所有属性进行劫持\r\n        this.walk(data);\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key =>{\r\n          defineReactive(data,key,data[key]);\r\n        })\r\n    }\r\n}\r\nfunction defineReactive(data,key,value){\r\n    observe(value)\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            return value;\r\n        },\r\n        set(newV) {\r\n            // observe(value)\r\n            value = newV;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data) {\r\n    // 判断数据是否为对象\r\n    if(!isObject(data)){\r\n        return ;\r\n    }\r\n    //创建观测者来观测数据\r\n    return new Observer(data);\r\n}","import { observe } from \"./observer/index\";\r\nimport { isFunction } from \"./utils\";\r\n\r\nexport function initState(vm){\r\n    const opts = vm.$options;\r\n    if(opts.data){\r\n        // 数据存在，则劫持数据\r\n        initData(vm);\r\n    }\r\n}\r\n\r\nfunction initData(vm){\r\n    let data = vm.$options.data;\r\n    // 判断data是函数还是对象,获取其对象数据\r\n    data = vm._data =  isFunction(data)?data(vm):data;\r\n    console.log(vm._data)\r\n    //观察数据\r\n    observe(data);\r\n}","import {initState} from \"./state\";\r\n\r\nexport function initMixin(Vue){\r\n    // 在Vue类的原型上添加这个函数\r\n    Vue.prototype._init = function(options){\r\n        const vm = this;\r\n        // 在原型上添加一个属性保存数据\r\n        vm.$options = options;//\r\n        //开始对数据进行劫持\r\n        initState(vm);\r\n    }\r\n}","import { initMixin } from \"./init\";\r\n\r\nfunction Vue(options) {\r\n    //options 为传入的选项\r\n    this._init(options)\r\n}\r\ninitMixin(Vue);\r\n\r\nexport default Vue;"],"names":["isFunction","val","isObject","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newV","initState","vm","opts","$options","initData","_data","console","log","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EAC5B,SAAO,OAAOA,GAAP,KAAe,UAAtB;EACH;EAEM,SAASC,QAAT,CAAkBD,GAAlB,EAAuB;EAC3B,SAAO,QAAOA,GAAP,MAAe,QAAf,IAA0BA,GAAG,KAAG,IAAvC;EACF;;MCHKE;EACF,oBAAYC,IAAZ,EAAiB;EAAA;;EACb;EACA,SAAKC,IAAL,CAAUD,IAAV;EACH;;;;aACD,cAAKA,IAAL,EAAU;EACNE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAG;EAC9BC,QAAAA,cAAc,CAACN,IAAD,EAAMK,GAAN,EAAUL,IAAI,CAACK,GAAD,CAAd,CAAd;EACD,OAFD;EAGH;;;;;;EAEL,SAASC,cAAT,CAAwBN,IAAxB,EAA6BK,GAA7B,EAAiCE,KAAjC,EAAuC;EACnCC,EAAAA,OAAO,CAACD,KAAD,CAAP;EACAL,EAAAA,MAAM,CAACO,cAAP,CAAsBT,IAAtB,EAA2BK,GAA3B,EAA+B;EAC3BK,IAAAA,GAD2B,iBACtB;EACD,aAAOH,KAAP;EACH,KAH0B;EAI3BI,IAAAA,GAJ2B,eAIvBC,IAJuB,EAIjB;EACN;EACAL,MAAAA,KAAK,GAAGK,IAAR;EACH;EAP0B,GAA/B;EASH;;EAEM,SAASJ,OAAT,CAAiBR,IAAjB,EAAuB;EAC1B;EACA,MAAG,CAACF,QAAQ,CAACE,IAAD,CAAZ,EAAmB;EACf;EACH,GAJyB;;;EAM1B,SAAO,IAAID,QAAJ,CAAaC,IAAb,CAAP;EACH;;EC/BM,SAASa,SAAT,CAAmBC,EAAnB,EAAsB;EACzB,MAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB;;EACA,MAAGD,IAAI,CAACf,IAAR,EAAa;EACT;EACAiB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACH;EACJ;;EAED,SAASG,QAAT,CAAkBH,EAAlB,EAAqB;EACjB,MAAId,IAAI,GAAGc,EAAE,CAACE,QAAH,CAAYhB,IAAvB,CADiB;;EAGjBA,EAAAA,IAAI,GAAGc,EAAE,CAACI,KAAH,GAAYtB,UAAU,CAACI,IAAD,CAAV,GAAiBA,IAAI,CAACc,EAAD,CAArB,GAA0Bd,IAA7C;EACAmB,EAAAA,OAAO,CAACC,GAAR,CAAYN,EAAE,CAACI,KAAf,EAJiB;;EAMjBV,EAAAA,OAAO,CAACR,IAAD,CAAP;EACH;;EChBM,SAASqB,SAAT,CAAmBC,GAAnB,EAAuB;EAC1B;EACAA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAASC,OAAT,EAAiB;EACnC,QAAMX,EAAE,GAAG,IAAX,CADmC;;EAGnCA,IAAAA,EAAE,CAACE,QAAH,GAAcS,OAAd,CAHmC;EAInC;;EACAZ,IAAAA,SAAS,CAACC,EAAD,CAAT;EACH,GAND;EAOH;;ECTD,SAASQ,GAAT,CAAaG,OAAb,EAAsB;EAClB;EACA,OAAKD,KAAL,CAAWC,OAAX;EACH;;EACDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}